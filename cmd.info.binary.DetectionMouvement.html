<div style="width:90px;height:100%;vertical-align: top;" class="cmd" data-type="info" data-subtype="binary" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" data-eqLogic_id="#eqLogic_id#" title="#collectDate#">
  	<!-- Info Widget
        Basé sur les widget de 	: DetectionMouvement "Dashboard DetectionMouvement" de ksoul78
        Mise à jour				: JAG 20190527 : Correction code pour V4
    -->
    <span style="font-size:12px;#hideCmdName#">#name_display#</span>
    <div class="iconCmd#id#"></div>
    <span class="timeCmd#id# timeCmd value" style="font-weight: bold;font-size : 10px;"></span>
    <script>
        jeedom.cmd.update['#id#'] = function(_options){
            // Options de personnalisation avec valeur par defaut
                // Paramètrage du logo
                    // Valeur pour ON ou 1
                        var srcImglogoON_M      = ('#logoON-M#'!='#'+'logoON-M#') ? "#logoON-M#" : "no_detection";
                        var srcImglogoON_M_T    = ('#logoON_type-M#'!='#'+'logoON_type-M#') ? "#logoON_type-M#" : "png";
                // Valeur pour OFF ou 0
                        var srcImglogoOFF_M     = ('#logoOFF-M#'!='#'+'logoOFF-M#') ? "#logoOFF-M#" : "detection";
                        var srcImglogoOFF_M_T   = ('#logoOFF_type-M#'!='#'+'logoOFF_type-M#') ? "#logoOFF_type-M#" : "png";
                // Paramètrage du logo pour Erreur
                        var srcImglogoER_M	    = ('#logoER_M#'!='#'+'logoER_M#') ? "#logoER_M#": "oups";
                        var srcImglogoER_M_T 	= ('#logoER_type_M#'!='#'+'logoER_type_M#') ? "#logoER_type_M#": "png";
                // Paramètre "sizehw" : à déclarer en pixels - 92 maxi
                        var srcImgHeight_M	     = (is_numeric('#sizeh-M#')) ? parseFloat('#sizeh-M#') : 40;
                        var srcImgWidth_M	     = (is_numeric('#sizew-M#')) ? parseFloat('#sizew_M#') : 40;
                        var srcImgSize_M 	     = 'height='+srcImgHeight_M+'px width='+srcImgWidth_M+'px';
                // Paramétrage des images
                        var srcImgURL_M          = 'plugins/widget/core/template/mobile/cmd.info.binary.DetectionMouvement/';
     
            if (_options.display_value == '1') {
                $('.cmd[data-cmd_id=#id#] .iconCmd#id#').empty().append('<img src="'+srcImgURL_M +srcImglogoON_M +'.'+ srcImglogoON_M_T+'" '+srcImgSize_M+'>');
            }else if (_options.display_value == '0') {
                $('.cmd[data-cmd_id=#id#] .iconCmd#id#').empty().append('<img src="'+srcImgURL_M +srcImglogoOFF_M +'.'+ srcImglogoOFF_M_T+'" '+srcImgSize_M+'>');
            }else {
                $('.cmd[data-cmd_id=#id#] .iconCmd#id#').empty().append('<img src="'+srcImgURL_M +srcImglogoER_M +'.'+ srcImglogoER_M_T+'" '+srcImgSize_M+'>');
            }
            // Derniere durée changement dernier etat -- Merci @Salvialf pour le code
                var srcImglogoTime_M    = '#logoTime_M#';
      
                if (srcImglogoTime_M == 'duree') {
                    jeedom.cmd.displayDuration(_options.valueDate, $('.cmd[data-cmd_id=#id#] .timeCmd#id#'));
                } else if (srcImglogoTime_M == 'date') {
                    var week            = ['dim.', 'lun.', 'mar.', 'mer.', 'jeu.', 'ven.', 'sam.'];
                    var date            = new Date(_options.valueDate.replace(' ', 'T'));
                    var t               = _options.valueDate.split(/[- :]/);
                    var format          = week[date.getDay()]+" "+t[2]+"/"+t[1];
                    var time            = "à "+t[3]+":"+t[4];
                    $('.cmd[data-cmd_id=#id#] .timeCmd#id#').empty().html(format+'<br>'+time);
                } else if (srcImglogoTime_M == 'heure') {
                    var t               = _options.valueDate.split(/[- :]/);
                    var time            = "à "+t[3]+":"+t[4]+":"+t[5];
                    $('.cmd[data-cmd_id=#id#] .timeCmd#id#').empty().html(time);
                }
        }

	jeedom.cmd.update['#id#']({display_value:'#state#'});
	</script>
</div>